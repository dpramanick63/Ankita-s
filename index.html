import React, { useState, useEffect, useRef } from 'react';
import { 
  Menu, X, Instagram, 
  Clock, Sparkles, Heart, Star, ChevronRight, MessageCircle
} from 'lucide-react';

// --- CUSTOM HOOKS & COMPONENTS FOR EFFECTS ---

// Reusable component for scroll-triggered fade-in effects
const FadeInSection = ({ children, delay = 0, direction = 'up' }) => {
  const [isVisible, setVisible] = useState(false);
  const domRef = useRef();

  useEffect(() => {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setVisible(true);
          observer.unobserve(domRef.current);
        }
      });
    }, { threshold: 0.15 });
    
    const currentRef = domRef.current;
    if (currentRef) observer.observe(currentRef);
    
    return () => {
      if (currentRef) observer.unobserve(currentRef);
    };
  }, []);

  const getTranslateClass = () => {
    if (isVisible) return 'translate-y-0 translate-x-0';
    switch (direction) {
      case 'up': return 'translate-y-12';
      case 'down': return '-translate-y-12';
      case 'left': return 'translate-x-12';
      case 'right': return '-translate-x-12';
      default: return 'translate-y-12';
    }
  };

  return (
    <div
      ref={domRef}
      className={`transition-all duration-1000 ease-out ${
        isVisible ? 'opacity-100' : 'opacity-0'
      } ${getTranslateClass()}`}
      style={{ transitionDelay: `${delay}ms` }}
    >
      {children}
    </div>
  );
};

// --- MAIN APPLICATION ---

export default function App() {
  const [isScrolled, setIsScrolled] = useState(false);
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);

  // Handle navbar background on scroll
  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const services = [
    { name: "Classic Manicure", price: "Starting at ₹499", desc: "Nail shaping, cuticle care, hand massage, and regular polish.", icon: <Heart className="w-6 h-6 text-rose-500" /> },
    { name: "Gel Polish", price: "Starting at ₹899", desc: "Long-lasting, chip-resistant gel polish with a flawless glossy finish.", icon: <Sparkles className="w-6 h-6 text-rose-500" /> },
    { name: "Acrylic Extensions", price: "Starting at ₹1499", desc: "Durable extensions tailored to your desired length and shape.", icon: <Star className="w-6 h-6 text-rose-500" /> },
    { name: "Custom Nail Art", price: "Varies", desc: "Intricate hand-painted designs, 3D art, chrome, and rhinestones.", icon: <Heart className="w-6 h-6 text-rose-500" /> },
    { name: "Luxury Pedicure", price: "Starting at ₹799", desc: "Relaxing foot soak, scrub, massage, and perfect polish application.", icon: <Sparkles className="w-6 h-6 text-rose-500" /> },
    { name: "Refills & Removal", price: "Starting at ₹399", desc: "Safe removal of gel/acrylics or infills to keep your nails fresh.", icon: <Star className="w-6 h-6 text-rose-500" /> },
  ];

  // Updated with highly reliable Unsplash image sources
  const galleryImages = [
    "https://images.unsplash.com/photo-1519014816548-bf5fe059e98b?auto=format&fit=crop&q=80&w=800",
    "https://images.unsplash.com/photo-1522337660859-02fbefca4702?auto=format&fit=crop&q=80&w=800",
    "https://images.unsplash.com/photo-1516975080661-422fc99d2bc1?auto=format&fit=crop&q=80&w=800",
    "https://images.unsplash.com/photo-1501504905252-473c47e087f8?auto=format&fit=crop&q=80&w=800",
    "https://images.unsplash.com/photo-1594913837482-1c251d1f057c?auto=format&fit=crop&q=80&w=800",
    "https://images.unsplash.com/photo-1588624132332-6bf59a1f3493?auto=format&fit=crop&q=80&w=800"
  ];

  return (
    <div className="min-h-screen bg-stone-50 font-sans text-stone-800 overflow-x-hidden">
      
      {/* Floating WhatsApp Button */}
      <a 
        href="https://wa.me/919876543210" 
        target="_blank" 
        rel="noopener noreferrer"
        className="fixed bottom-6 right-6 z-50 bg-green-500 text-white p-4 rounded-full shadow-xl hover:bg-green-600 transition-all hover:scale-110 flex items-center justify-center group"
      >
        <MessageCircle className="w-6 h-6" />
        <span className="max-w-0 overflow-hidden whitespace-nowrap group-hover:max-w-xs transition-all duration-300 ease-in-out pl-0 group-hover:pl-2 font-medium">
          Book on WhatsApp
        </span>
      </a>

      {/* Navigation */}
      <nav className={`fixed w-full z-40 transition-all duration-500 ${isScrolled ? 'bg-white/95 backdrop-blur-md shadow-md py-3' : 'bg-transparent py-5'}`}>
        <div className="max-w-7xl mx-auto px-6 lg:px-8 flex justify-between items-center">
          <div className="flex items-center gap-2">
            <Sparkles className={`w-6 h-6 ${isScrolled ? 'text-rose-500' : 'text-rose-400'}`} />
            <span className={`text-2xl font-serif font-bold tracking-wider ${isScrolled ? 'text-stone-900' : 'text-white drop-shadow-md'}`}>
              ANKITA SIL PYNE
            </span>
          </div>

          {/* Desktop Nav */}
          <div className="hidden md:flex items-center space-x-8">
            {['Home', 'About', 'Services', 'Gallery'].map((item) => (
              <a 
                key={item} 
                href={`#${item.toLowerCase()}`} 
                className={`text-sm font-medium uppercase tracking-widest hover:text-rose-400 transition-colors ${isScrolled ? 'text-stone-600' : 'text-white drop-shadow-md'}`}
              >
                {item}
              </a>
            ))}
            <a href="https://wa.me/919876543210" target="_blank" rel="noopener noreferrer" className="bg-rose-500 text-white px-6 py-2.5 rounded-full text-sm font-medium uppercase tracking-wider hover:bg-rose-600 transition-colors shadow-lg shadow-rose-500/30">
              Book Now
            </a>
          </div>

          {/* Mobile Menu Button */}
          <button 
            className="md:hidden p-2"
            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
          >
            {isMobileMenuOpen ? (
              <X className={`w-6 h-6 ${isScrolled ? 'text-stone-900' : 'text-white'}`} />
            ) : (
              <Menu className={`w-6 h-6 ${isScrolled ? 'text-stone-900' : 'text-white'}`} />
            )}
          </button>
        </div>

        {/* Mobile Nav Dropdown */}
        <div className={`md:hidden absolute top-full left-0 w-full bg-white shadow-xl transition-all duration-300 overflow-hidden ${isMobileMenuOpen ? 'max-h-96 border-t border-stone-100' : 'max-h-0'}`}>
          <div className="flex flex-col py-4 px-6 space-y-4">
            {['Home', 'About', 'Services', 'Gallery'].map((item) => (
              <a 
                key={item} 
                href={`#${item.toLowerCase()}`} 
                onClick={() => setIsMobileMenuOpen(false)}
                className="text-stone-600 font-medium uppercase tracking-wider py-2 border-b border-stone-100"
              >
                {item}
              </a>
            ))}
          </div>
        </div>
      </nav>

      {/* Hero Section */}
      <section id="home" className="relative h-screen flex items-center justify-center overflow-hidden">
        {/* Background Image with Overlay */}
        <div className="absolute inset-0 z-0">
          <img 
            src="https://images.unsplash.com/photo-1519014816548-bf5fe059e98b?auto=format&fit=crop&q=80&w=2000" 
            alt="Beautiful nail art" 
            className="w-full h-full object-cover object-center"
          />
          <div className="absolute inset-0 bg-gradient-to-r from-stone-900/80 to-stone-900/40"></div>
        </div>

        {/* Hero Content */}
        <div className="relative z-10 text-center px-6 max-w-4xl mx-auto mt-20">
          <FadeInSection direction="up" delay={100}>
            <span className="text-rose-300 font-medium tracking-[0.3em] uppercase mb-4 block">
              Premium Nail Art Studio
            </span>
          </FadeInSection>
          <FadeInSection direction="up" delay={300}>
            <h1 className="text-5xl md:text-7xl font-serif text-white mb-6 leading-tight drop-shadow-lg">
              Elevate Your <span className="text-rose-400 italic">Elegance</span>
            </h1>
          </FadeInSection>
          <FadeInSection direction="up" delay={500}>
            <p className="text-stone-200 text-lg md:text-xl mb-10 max-w-2xl mx-auto font-light leading-relaxed">
              Discover the art of perfect nails with Ankita Sil Pyne. Specialized in bespoke nail artistry, extensions, and luxurious nail care.
            </p>
          </FadeInSection>
          <FadeInSection direction="up" delay={700}>
            <div className="flex flex-col sm:flex-row items-center justify-center gap-4">
              <a href="https://wa.me/919876543210" target="_blank" rel="noopener noreferrer" className="w-full sm:w-auto bg-rose-500 text-white px-8 py-4 rounded-full font-medium tracking-wide hover:bg-rose-600 transition-all shadow-lg shadow-rose-500/40 hover:-translate-y-1">
                Book an Appointment
              </a>
              <a href="#gallery" className="w-full sm:w-auto bg-white/10 backdrop-blur-sm border border-white/30 text-white px-8 py-4 rounded-full font-medium tracking-wide hover:bg-white/20 transition-all">
                View Gallery
              </a>
            </div>
          </FadeInSection>
        </div>
      </section>

      {/* About Section */}
      <section id="about" className="py-24 bg-white relative">
        <div className="max-w-7xl mx-auto px-6 lg:px-8">
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
            <FadeInSection direction="right">
              <div className="relative">
                <div className="absolute inset-0 bg-rose-200 rounded-3xl translate-x-4 translate-y-4 -z-10"></div>
                <img 
                  src="https://images.unsplash.com/photo-1522337660859-02fbefca4702?auto=format&fit=crop&q=80&w=1000" 
                  alt="Nail studio ambiance" 
                  className="rounded-3xl shadow-2xl w-full object-cover h-[500px]"
                />
                <div className="absolute -bottom-8 -left-8 bg-white p-6 rounded-2xl shadow-xl hidden md:block">
                  <div className="flex items-center gap-4">
                    <div className="bg-rose-100 p-3 rounded-full text-rose-500">
                      <Star className="w-8 h-8 fill-current" />
                    </div>
                    <div>
                      <p className="text-3xl font-bold text-stone-800">5+</p>
                      <p className="text-stone-500 text-sm font-medium uppercase tracking-wider">Years Experience</p>
                    </div>
                  </div>
                </div>
              </div>
            </FadeInSection>
            
            <FadeInSection direction="left" delay={200}>
              <div>
                <span className="text-rose-500 font-bold tracking-widest uppercase text-sm mb-2 block">About The Artist</span>
                <h2 className="text-4xl md:text-5xl font-serif text-stone-900 mb-6">Meet Ankita Sil Pyne</h2>
                <p className="text-stone-600 mb-6 text-lg leading-relaxed">
                  With a profound passion for beauty and an eye for intricate detail, I transform ordinary nails into miniature masterpieces. Every client is a blank canvas, and every set of nails is a unique work of art tailored to your personality and style.
                </p>
                <p className="text-stone-600 mb-8 text-lg leading-relaxed">
                  Using only premium quality products and the latest techniques, I ensure your nails not only look stunning but remain healthy and strong. Whether you desire a classic French manicure or elaborate 3D embellishments, your satisfaction is my priority.
                </p>
                
                <ul className="space-y-4 mb-8">
                  {['Certified Nail Technician', 'Premium Quality Products', 'Hygienic & Safe Environment', 'Customized Consultations'].map((item, idx) => (
                    <li key={idx} className="flex items-center gap-3 text-stone-700 font-medium">
                      <Heart className="w-5 h-5 text-rose-400 fill-rose-100" />
                      {item}
                    </li>
                  ))}
                </ul>
                
                {/* Replaced broken image signature with a stylized text signature */}
                <div className="font-serif italic text-3xl text-stone-300 mt-6 select-none">
                  Ankita Sil Pyne
                </div>
              </div>
            </FadeInSection>
          </div>
        </div>
      </section>

      {/* Services Section */}
      <section id="services" className="py-24 bg-stone-50">
        <div className="max-w-7xl mx-auto px-6 lg:px-8">
          <FadeInSection direction="up">
            <div className="text-center max-w-2xl mx-auto mb-16">
              <span className="text-rose-500 font-bold tracking-widest uppercase text-sm mb-2 block">Our Services</span>
              <h2 className="text-4xl md:text-5xl font-serif text-stone-900 mb-6">Pamper Yourself</h2>
              <p className="text-stone-600 text-lg">Indulge in our range of luxury nail care services designed to make you feel confident and beautiful.</p>
            </div>
          </FadeInSection>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {services.map((service, index) => (
              <FadeInSection key={index} delay={index * 100} direction="up">
                <div className="bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-stone-100 group hover:-translate-y-2">
                  <div className="w-14 h-14 bg-rose-50 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-rose-500 transition-colors duration-300">
                    <div className="group-hover:text-white transition-colors duration-300 text-rose-500">
                      {service.icon}
                    </div>
                  </div>
                  <h3 className="text-2xl font-serif text-stone-900 mb-3">{service.name}</h3>
                  <p className="text-stone-500 mb-6 leading-relaxed min-h-[48px]">{service.desc}</p>
                  <div className="flex items-center justify-between pt-6 border-t border-stone-100">
                    <span className="font-semibold text-rose-500">{service.price}</span>
                    <button className="text-stone-400 group-hover:text-rose-500 transition-colors">
                      <ChevronRight className="w-5 h-5" />
                    </button>
                  </div>
                </div>
              </FadeInSection>
            ))}
          </div>
        </div>
      </section>

      {/* Banner / CTA */}
      <section className="py-20 bg-rose-900 relative overflow-hidden">
        <div className="absolute inset-0 opacity-20">
          <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(255,255,255,0.8)_0,transparent_100%)]"></div>
        </div>
        <div className="max-w-4xl mx-auto px-6 text-center relative z-10">
          <FadeInSection direction="up">
            <h2 className="text-3xl md:text-5xl font-serif text-rose-50 mb-6 leading-tight">
              Ready to give your nails the attention they deserve?
            </h2>
            <p className="text-rose-200 text-lg mb-10">
              Book your session today and step out with flawless, beautiful nails.
            </p>
            <a href="https://wa.me/919876543210" target="_blank" rel="noopener noreferrer" className="inline-block bg-white text-rose-900 px-10 py-4 rounded-full font-bold tracking-wide hover:bg-rose-50 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1">
              Schedule Now
            </a>
          </FadeInSection>
        </div>
      </section>

      {/* Gallery Section */}
      <section id="gallery" className="py-24 bg-white">
        <div className="max-w-7xl mx-auto px-6 lg:px-8">
          <FadeInSection direction="up">
            <div className="flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6">
              <div className="max-w-2xl">
                <span className="text-rose-500 font-bold tracking-widest uppercase text-sm mb-2 block">Portfolio</span>
                <h2 className="text-4xl md:text-5xl font-serif text-stone-900 mb-4">Our Masterpieces</h2>
                <p className="text-stone-600 text-lg">A glimpse into our artistry. Follow us on Instagram for daily inspiration.</p>
              </div>
              <a href="#" className="flex items-center gap-2 text-rose-500 font-medium hover:text-rose-600 transition-colors">
                <Instagram className="w-5 h-5" />
                @ankitasilpyne_nails
              </a>
            </div>
          </FadeInSection>

          <div className="grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
            {galleryImages.map((src, index) => (
              <FadeInSection key={index} delay={index * 100} direction="up">
                <div className="group relative overflow-hidden rounded-2xl aspect-[4/5]">
                  <img 
                    src={src} 
                    alt={`Nail Art ${index + 1}`} 
                    className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                  />
                  <div className="absolute inset-0 bg-gradient-to-t from-stone-900/80 via-stone-900/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end justify-center pb-8">
                    <Heart className="text-white w-8 h-8 hover:text-rose-400 transition-colors cursor-pointer" />
                  </div>
                </div>
              </FadeInSection>
            ))}
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="bg-stone-900 text-stone-300 pt-24 pb-12">
        <div className="max-w-7xl mx-auto px-6 lg:px-8">
          {/* Changed from grid-cols-4 to grid-cols-3 to center and balance after removing contact info */}
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12 mb-16">
            
            {/* Brand */}
            <FadeInSection direction="up" delay={0}>
              <div className="space-y-6">
                <div className="flex items-center gap-2">
                  <Sparkles className="w-6 h-6 text-rose-400" />
                  <span className="text-2xl font-serif font-bold tracking-wider text-white">
                    ASP NAILS
                  </span>
                </div>
                <p className="text-stone-400 leading-relaxed">
                  Elevating your elegance through premium, personalized nail artistry. Where every detail matters.
                </p>
                <div className="flex gap-4">
                  <a href="#" className="w-10 h-10 rounded-full bg-stone-800 flex items-center justify-center hover:bg-rose-500 hover:text-white transition-all">
                    <Instagram className="w-5 h-5" />
                  </a>
                  <a href="https://wa.me/919876543210" target="_blank" rel="noopener noreferrer" className="w-10 h-10 rounded-full bg-stone-800 flex items-center justify-center hover:bg-rose-500 hover:text-white transition-all">
                    <MessageCircle className="w-5 h-5" />
                  </a>
                </div>
              </div>
            </FadeInSection>

            {/* Quick Links */}
            <FadeInSection direction="up" delay={100}>
              <div>
                <h4 className="text-white font-bold uppercase tracking-wider mb-6">Explore</h4>
                <ul className="space-y-3">
                  {['Home', 'About Artist', 'Our Services', 'Gallery Portfolio'].map((item) => (
                    <li key={item}>
                      <a href={`#${item.split(' ')[0].toLowerCase()}`} className="hover:text-rose-400 transition-colors flex items-center gap-2">
                        <ChevronRight className="w-4 h-4" /> {item}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            </FadeInSection>

            {/* Hours */}
            <FadeInSection direction="up" delay={200}>
              <div>
                <h4 className="text-white font-bold uppercase tracking-wider mb-6">Opening Hours</h4>
                <ul className="space-y-3">
                  <li className="flex justify-between items-center border-b border-stone-800 pb-2">
                    <span className="flex items-center gap-2"><Clock className="w-4 h-4 text-stone-500"/> Mon - Fri</span>
                    <span>10:00 AM - 8:00 PM</span>
                  </li>
                  <li className="flex justify-between items-center border-b border-stone-800 pb-2">
                    <span className="flex items-center gap-2"><Clock className="w-4 h-4 text-stone-500"/> Saturday</span>
                    <span>10:00 AM - 9:00 PM</span>
                  </li>
                  <li className="flex justify-between items-center pb-2 text-rose-400">
                    <span className="flex items-center gap-2"><Clock className="w-4 h-4"/> Sunday</span>
                    <span>Closed</span>
                  </li>
                </ul>
              </div>
            </FadeInSection>

          </div>

          <div className="border-t border-stone-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-stone-500">
            <p>&copy; {new Date().getFullYear()} Ankita Sil Pyne Nail Art. All rights reserved.</p>
            <p>Designed with elegance.</p>
          </div>
        </div>
      </footer>
    </div>
  );
}
